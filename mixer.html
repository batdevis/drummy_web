<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<title>Mixer</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="icon" type="image/png" sizes="174x174" href="./favicon.png">

	<script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2/webcomponents-bundle.js"></script>
	<script src="./js/Tone.js"></script>
	<script src="./js/tonejs-ui.js"></script>
	<style type="text/css">
		#tracks {
			display: flex;
		}
		#tracks tone-channel {
			flex-grow: 1;
			margin: 5px;
			width: 20%;
		}
	</style>
</head>
<body>
  <tone-loader></tone-loader>

	<tone-content>
  	<tone-play-toggle></tone-play-toggle>
		<div id="tracks">
			<tone-channel label="A1" id="A1"></tone-channel>
			<tone-channel label="A2" id="A2"></tone-channel>
			<tone-channel label="A3" id="A3"></tone-channel>
			<tone-channel label="A4" id="A4"></tone-channel>
		</div>
	</tone-content>

	<script type="text/javascript">
		function makeChannel(name){
			var channel = new Tone.Channel().toMaster();
			var player = new Tone.Player({
				url : `./audio/my/A/${name}.[wav|ogg|mp3]`,
				loop : true
			}).sync().start(0);
			player.chain(channel);

			//bind the UI
			document.querySelector(`#${name}`).bind(channel);
		}

		makeChannel("A1");
		makeChannel("A2");
		makeChannel("A3");
		//makeChannel("A4");

		document.querySelector("tone-play-toggle").bind(Tone.Transport);
	</script>
</body>
</html>
